# ✅ Финальный Checklist - Запуск камеры

## Перед запуском в Xcode

### 1. Структура файлов
- [ ] Все файлы ViewModels/* добавлены в проект
- [ ] Все файлы Services/* добавлены в проект
- [ ] Все файлы Models/* добавлены в проект
- [ ] Все файлы Utilities/* добавлены в проект
- [ ] CameraPreviewLayer.swift обновлён
- [ ] CameraView.swift обновлён
- [ ] REQUIREMENTS.md обновлён

### 2. Target Membership
- [ ] ViewModelsCameraViewModel.swift → Target: CustomCam ✓
- [ ] ServicesCameraService.swift → Target: CustomCam ✓
- [ ] ServicesPhotoLibraryService.swift → Target: CustomCam ✓
- [ ] ModelsCameraConfiguration.swift → Target: CustomCam ✓
- [ ] ModelsPhotoCapture.swift → Target: CustomCam ✓
- [ ] UtilitiesPermissionsManager.swift → Target: CustomCam ✓

### 3. Info.plist разрешения
- [ ] NSCameraUsageDescription добавлен
- [ ] NSPhotoLibraryAddUsageDescription добавлен
- [ ] NSPhotoLibraryUsageDescription добавлен (опционально)

### 4. Импорты проверены
- [ ] import SwiftUI
- [ ] import AVFoundation
- [ ] import Photos
- [ ] import Observation

---

## Checklist билда

### 1. Clean Build
```
⇧⌘K - Clean Build Folder
```
- [ ] Выполнено без ошибок

### 2. Build Project
```
⌘B - Build
```
- [ ] Билд успешен
- [ ] Нет ошибок компиляции
- [ ] Нет warnings (или минимум)

### 3. Resolve Issues
Если есть ошибки:
- [ ] "Cannot find 'CameraViewModel'" → проверить Target Membership
- [ ] "Cannot find 'Observation'" → проверить iOS version (17+)
- [ ] "Cannot find 'AppTheme'" → проверить что файл в проекте
- [ ] Другие импорты → проверить spelling

---

## Checklist запуска

### 1. Устройство
- [ ] Используется РЕАЛЬНОЕ устройство (не симулятор)
- [ ] iPhone подключен через кабель
- [ ] Устройство разблокировано
- [ ] Developer Mode включен (iOS 16+)

### 2. Запуск приложения
```
⌘R - Run
```
- [ ] Приложение установилось
- [ ] Приложение запустилось
- [ ] Нет крашей при старте

### 3. Разрешения
При первом запуске:
- [ ] Появился диалог разрешения камеры
- [ ] Нажата кнопка "Allow"
- [ ] Появился диалог разрешения галереи
- [ ] Нажата кнопка "Allow"

Если не появились:
- [ ] Проверить Info.plist
- [ ] Settings → CustomCam → Reset permissions
- [ ] Переустановить app

---

## Checklist функционала

### 1. Live Preview
- [ ] Видна картинка с камеры
- [ ] Картинка не чёрная
- [ ] Картинка не замороженная
- [ ] Картинка обновляется в реальном времени

### 2. Зум
- [ ] Кнопка "0.5" работает → широкий угол
- [ ] Кнопка "1x" работает → нормальный зум (активна по умолчанию)
- [ ] Кнопка "2" работает → телефото
- [ ] Активная кнопка выделена жёлтым
- [ ] Зум меняется плавно

### 3. Переключение камеры
- [ ] Кнопка flip camera работает
- [ ] Камера переключается с задней на фронтальную
- [ ] Камера переключается с фронтальной на заднюю
- [ ] Preview обновляется после переключения

### 4. Захват фото
- [ ] Кнопка shutter работает
- [ ] При нажатии происходит захват
- [ ] Нет лагов/фризов UI
- [ ] Кнопка не дублирует нажатия

### 5. Сохранение в галерею
- [ ] Открыть приложение Photos
- [ ] Найти последнее фото
- [ ] Фото из CustomCam там есть
- [ ] Фото в хорошем качестве
- [ ] Timestamp соответствует времени съёмки

---

## Checklist UI/UX

### 1. Layout
- [ ] Верхний отступ (CameraTopSafeArea) на месте
- [ ] Preview камеры занимает большую часть экрана
- [ ] Зум кнопки видны поверх preview
- [ ] Нижняя панель чёрная, высотой 150px
- [ ] Все элементы адаптивны (не вылезают за края)

### 2. Кнопки
- [ ] Gallery button (левая)
- [ ] Shutter button (центр, самая большая)
- [ ] Flip camera button (правая)
- [ ] Все кликабельны
- [ ] Визуальный feedback при нажатии

### 3. Цвета (AppTheme)
- [ ] Фон чёрный
- [ ] Активная зум кнопка → жёлтый текст
- [ ] Неактивные зум кнопки → белый текст
- [ ] Shutter button белый
- [ ] Всё соответствует дизайну

---

## Checklist ошибок

### 1. Обработка ошибок
- [ ] Запустить без разрешения камеры → показывается alert
- [ ] Запустить без разрешения галереи → показывается alert
- [ ] Alert можно закрыть кнопкой OK
- [ ] errorMessage очищается после закрытия

### 2. Edge Cases
- [ ] Зум за пределами диапазона → ограничивается
- [ ] Быстрые тапы по shutter → обрабатывается (isCaptureInProgress)
- [ ] Переключение камеры во время захвата → не ломается
- [ ] Закрыть app во время захвата → не крашится

---

## Checklist производительности

### 1. Memory
- [ ] Открыть Xcode Debug Navigator
- [ ] Проверить Memory usage
- [ ] Нет утечек памяти
- [ ] Memory стабильна при многократном захвате

### 2. CPU
- [ ] CPU usage адекватный (не 100% постоянно)
- [ ] Нет лагов при переключении зума
- [ ] Нет фризов при захвате фото

### 3. Battery
- [ ] Preview не жрёт батарею слишком быстро
- [ ] Камера останавливается при onDisappear

---

## Checklist совместимости

### 1. Устройства
Протестировать на:
- [ ] iPhone с одной камерой (SE)
- [ ] iPhone с двумя камерами (11, 12, 13)
- [ ] iPhone с тремя камерами (Pro модели)
- [ ] iPhone с ProRAW (12 Pro+)

### 2. iOS версии
- [ ] iOS 17+ (для @Observable)
- [ ] Или использовать ObservableObject для iOS 16-

### 3. Ориентации
- [ ] Portrait (основная)
- [ ] Landscape Left (опционально)
- [ ] Landscape Right (опционально)

---

## Финальный OK для Production

- [ ] ✅ Все тесты функционала пройдены
- [ ] ✅ UI корректный на всех устройствах
- [ ] ✅ Нет ошибок в консоли
- [ ] ✅ Нет крашей
- [ ] ✅ Разрешения работают
- [ ] ✅ Фото сохраняются
- [ ] ✅ Производительность адекватная
- [ ] ✅ Код документирован
- [ ] ✅ REQUIREMENTS.md обновлён

---

## Next Steps после OK

1. [ ] Добавить LUT processing (CoreImage)
2. [ ] Реализовать dual-file capture (JPEG + ProRAW)
3. [ ] Показать последнее фото в GalleryButton
4. [ ] Добавить haptic feedback
5. [ ] Добавить loading indicator при захвате
6. [ ] Настройки (flash, quality, LUT)
7. [ ] Тесты (unit + UI)

---

**Дата последней проверки:** _____________  
**Протестировано на устройстве:** _____________  
**iOS версия:** _____________  
**Результат:** ☐ PASS  ☐ FAIL  
**Комментарии:** 
_______________________________________________
_______________________________________________
_______________________________________________

---

**Статус:** Готово к тестированию ✅
